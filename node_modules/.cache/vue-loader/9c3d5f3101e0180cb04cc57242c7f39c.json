{"remainingRequest":"/Users/progressive/Documents/projects/pman/after-school-classes/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/progressive/Documents/projects/pman/after-school-classes/src/views/Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/progressive/Documents/projects/pman/after-school-classes/src/views/Cart.vue","mtime":1609806262975},{"path":"/Users/progressive/Documents/projects/pman/after-school-classes/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/progressive/Documents/projects/pman/after-school-classes/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIGVzbGludC1kaXNhYmxlICovCmltcG9ydCB7bWFwTXV0YXRpb25zLCBtYXBHZXR0ZXJzfSBmcm9tICd2dWV4JwppbXBvcnQge3BsYWNlX29yZGVyfSBmcm9tICcuLi9hcGlzL2xlc3NvbnMuanMnCmV4cG9ydCBkZWZhdWx0IHsKCW5hbWU6ICdIb21lJywKCWNvbXBvbmVudHM6IHt9LAoJbW91bnRlZCgpIHt9LAoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQl1c2VyOiB7CgkJCQluYW1lOiAnJywKCQkJCXBob25lOiAnJwoJCQl9CgkJfQoJfSwKCWNvbXB1dGVkOiB7CgkJLi4ubWFwR2V0dGVycyhbJ2xlc3NvbnMnLCAnY2FydCddKSwKCQljb21wdXRlVG90YWwoKSB7CgkJCWxldCB0b3RhbCA9IDAKCQkJZm9yIChsZXQgaXRlbSBvZiB0aGlzLmNhcnQpIHsKCQkJCXRvdGFsID0gdG90YWwgKyBpdGVtLnRvdGFsCgkJCX0KCQkJcmV0dXJuIHRvdGFsCgkJfSwKCgkJdmFsaWRhdGVQaG9uZSgpIHsKCQkJdmFyIHBob25lbm8gPSAvXlxkezEwfSQvCgkJCWlmICh0aGlzLnVzZXIucGhvbmUubWF0Y2gocGhvbmVubykpIHsKCQkJCXJldHVybiB0cnVlCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gZmFsc2UKCQkJfQoJCX0sCgkJdmFsaWRhdGVOYW1lKCkgewoJCQl2YXIgbmFtZSA9IC9eW2EtekEtWiBdKyQvCgkJCWlmICh0aGlzLnVzZXIubmFtZS5tYXRjaChuYW1lKSkgewoJCQkJcmV0dXJuIHRydWUKCQkJfSBlbHNlIHsKCQkJCXJldHVybiBmYWxzZQoJCQl9CgkJfQoJfSwKCW1ldGhvZHM6IHsKCQkuLi5tYXBNdXRhdGlvbnMoWydhZGRUb0NhcnQnLCAnY2xlYXJMZXNzb25zJ10pLAoJCWNoZWNrb3V0QnRuOiBhc3luYyBmdW5jdGlvbigpIHsKCQkJdHJ5IHsKCQkJCWxldCByZXN1bHQgPSBhd2FpdCBwbGFjZV9vcmRlcigKCQkJCQlKU09OLnN0cmluZ2lmeSh7CgkJCQkJCWNvbnRlbnRzOiB0aGlzLmNhcnQsCgkJCQkJCXVzZXI6IHRoaXMudXNlciwKCQkJCQkJdG90YWw6IHRoaXMuY29tcHV0ZVRvdGFsCgkJCQkJfSkKCQkJCSkKCgkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2NvbmZpcm1hdGlvbicpCgkJCX0gY2F0Y2ggKGVycm9yKSB7CgkJCQljb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKQoJCQl9CgkJfSwKCQljaGFuZ2VRdHkoaSwgaXRlbSkgewoJCQlsZXQgb2xkID0KCQkJCXRoaXMuY2FydFtpXS50b3RhbCAvCgkJCQl0aGlzLmxlc3NvbnMuZmluZCgoZSkgPT4gZS5faWQgPT09IGl0ZW0ubGVzc29uKS5wcmljZQoJCQl0aGlzLmNhcnRbaV0udG90YWwgPQoJCQkJdGhpcy5jYXJ0W2ldLnF1YW50aXR5ICoKCQkJCXRoaXMubGVzc29ucy5maW5kKChlKSA9PiBlLl9pZCA9PT0gaXRlbS5sZXNzb24pLnByaWNlCgkJCWlmICh0aGlzLmNhcnRbaV0ucXVhbnRpdHkgPiBvbGQpIHsKCQkJCXRoaXMubGVzc29ucy5maW5kKChlKSA9PiBlLl9pZCA9PT0gaXRlbS5sZXNzb24pLnNwYWNlLS0KCQkJfSBlbHNlIHsKCQkJCXRoaXMubGVzc29ucy5maW5kKChlKSA9PiBlLl9pZCA9PT0gaXRlbS5sZXNzb24pLnNwYWNlKysKCQkJfQoJCX0sCgkJcmVtb3ZlSXRlbShpLCBpdGVtKSB7CgkJCWxldCBvbGQgPQoJCQkJdGhpcy5jYXJ0W2ldLnRvdGFsIC8KCQkJCXRoaXMubGVzc29ucy5maW5kKChlKSA9PiBlLl9pZCA9PT0gaXRlbS5sZXNzb24pLnByaWNlCgkJCXRoaXMubGVzc29ucy5maW5kKChlKSA9PiBlLl9pZCA9PT0gaXRlbS5sZXNzb24pLnNwYWNlKysKCgkJCXRoaXMuY2FydC5zcGxpY2UoaSwgMSkKCQkJaWYgKHRoaXMuY2FydC5sZW5ndGggPT09IDApIHsKCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvJykKCQkJfQoJCX0sCgkJdmlld0NhcnQoKSB7CgkJCXRoaXMuJHJvdXRlci5wdXNoKCcvY2FydCcpCgkJfQoJfQp9Cg=="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div class=\"p-5\">\n\t\t<div class=\"d-flex justify-content-between mb-3\">\n\t\t\t<button class=\"btn btn-default border\" @click=\"$router.go(-1)\">\n\t\t\t\tBack\n\t\t\t</button>\n\t\t</div>\n\t\t<h3>Cart</h3>\n\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-7\">\n\t\t\t\t<!-- the cart items show here -->\n\t\t\t\t<div class=\"border px-5 py-2 mb-2\" v-for=\"(item, i) of cart\" :key=\"i\">\n\t\t\t\t\t<div class=\"d-flex justify-content-between align-items-center\">\n\t\t\t\t\t\t<div class=\"d-flex justify-content-start align-items-center\">\n\t\t\t\t\t\t\t<div class=\"mr-3\">\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t:src=\"lessons.find((e) => e._id === item.lesson).image\"\n\t\t\t\t\t\t\t\t\tstyle=\"height: 100px; width: 100px; border-radius: 10px\"\n\t\t\t\t\t\t\t\t\talt=\"\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pt-2 text-capitalize\">\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tSubject:\n\t\t\t\t\t\t\t\t\t{{ lessons.find((e) => e._id === item.lesson).lesson }}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tLocation:\n\t\t\t\t\t\t\t\t\t{{ lessons.find((e) => e._id === item.lesson).location }}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\tUnit Price: £{{\n\t\t\t\t\t\t\t\t\t\tlessons.find((e) => e._id === item.lesson).price\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:id=\"item.lesson\"\n\t\t\t\t\t\t\t\t\tmin=\"1\"\n\t\t\t\t\t\t\t\t\t:max=\"\n\t\t\t\t\t\t\t\t\t\tlessons.find((e) => e._id === item.lesson).space +\n\t\t\t\t\t\t\t\t\t\t\tcart[i].quantity\n\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t@change=\"(e) => changeQty(i, item, e)\"\n\t\t\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\t\tv-model=\"cart[i].quantity\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<p>Total Price: £{{ item.total }}</p>\n\t\t\t\t\t\t\t<button @click=\"removeItem(i, item)\" class=\"btn btn-warning\">\n\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"col-5\">\n\t\t\t\t<!-- checkout form here -->\n\t\t\t\t<div class=\"border w-100 p-5\">\n\t\t\t\t\t<h5>Total Payable: £{{ computeTotal }}</h5>\n\n\t\t\t\t\t<form class=\"mt-5\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"exampleFormControlInput1\">Full Name</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"user.name\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\t\tid=\"exampleFormControlInput1\"\n\t\t\t\t\t\t\t\tplaceholder=\"Josiah Iggah\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"exampleFormControlInput1\">Phone Number</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model=\"user.phone\"\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tclass=\"form-control\"\n\t\t\t\t\t\t\t\tid=\"exampleFormControlInput1\"\n\t\t\t\t\t\t\t\tplaceholder=\"201885109\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t@click=\"checkoutBtn\"\n\t\t\t\t\t\t\t\tclass=\"btn btn-primary\"\n\t\t\t\t\t\t\t\tv-if=\"validatePhone && validateName\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCheckout Now\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n/* eslint-disable */\nimport {mapMutations, mapGetters} from 'vuex'\nimport {place_order} from '../apis/lessons.js'\nexport default {\n\tname: 'Home',\n\tcomponents: {},\n\tmounted() {},\n\tdata() {\n\t\treturn {\n\t\t\tuser: {\n\t\t\t\tname: '',\n\t\t\t\tphone: ''\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters(['lessons', 'cart']),\n\t\tcomputeTotal() {\n\t\t\tlet total = 0\n\t\t\tfor (let item of this.cart) {\n\t\t\t\ttotal = total + item.total\n\t\t\t}\n\t\t\treturn total\n\t\t},\n\n\t\tvalidatePhone() {\n\t\t\tvar phoneno = /^\\d{10}$/\n\t\t\tif (this.user.phone.match(phoneno)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\tvalidateName() {\n\t\t\tvar name = /^[a-zA-Z ]+$/\n\t\t\tif (this.user.name.match(name)) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations(['addToCart', 'clearLessons']),\n\t\tcheckoutBtn: async function() {\n\t\t\ttry {\n\t\t\t\tlet result = await place_order(\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\tcontents: this.cart,\n\t\t\t\t\t\tuser: this.user,\n\t\t\t\t\t\ttotal: this.computeTotal\n\t\t\t\t\t})\n\t\t\t\t)\n\n\t\t\t\tthis.$router.push('/confirmation')\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error.message)\n\t\t\t}\n\t\t},\n\t\tchangeQty(i, item) {\n\t\t\tlet old =\n\t\t\t\tthis.cart[i].total /\n\t\t\t\tthis.lessons.find((e) => e._id === item.lesson).price\n\t\t\tthis.cart[i].total =\n\t\t\t\tthis.cart[i].quantity *\n\t\t\t\tthis.lessons.find((e) => e._id === item.lesson).price\n\t\t\tif (this.cart[i].quantity > old) {\n\t\t\t\tthis.lessons.find((e) => e._id === item.lesson).space--\n\t\t\t} else {\n\t\t\t\tthis.lessons.find((e) => e._id === item.lesson).space++\n\t\t\t}\n\t\t},\n\t\tremoveItem(i, item) {\n\t\t\tlet old =\n\t\t\t\tthis.cart[i].total /\n\t\t\t\tthis.lessons.find((e) => e._id === item.lesson).price\n\t\t\tthis.lessons.find((e) => e._id === item.lesson).space++\n\n\t\t\tthis.cart.splice(i, 1)\n\t\t\tif (this.cart.length === 0) {\n\t\t\t\tthis.$router.push('/')\n\t\t\t}\n\t\t},\n\t\tviewCart() {\n\t\t\tthis.$router.push('/cart')\n\t\t}\n\t}\n}\n</script>\n\n<style scoped></style>\n"]}]}